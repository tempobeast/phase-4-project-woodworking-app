(this["webpackJsonpreact-rails-api-project-template-client"]=this["webpackJsonpreact-rails-api-project-template-client"]||[]).push([[0],{12:function(e,t,n){},27:function(e,t,n){},33:function(e,t,n){"use strict";n.r(t);var r,c,o,i,a=n(1),s=n(18),j=n.n(s),l=(n(27),n(7)),u=n(8),d=n(3),b=(n(12),n(2)),p=n(4),h=n(5),O=(h.a.div(r||(r=Object(p.a)(["\n  border-radius: 6px;\n  box-shadow: 0 0.5em 1em -0.125em rgb(10 10 10 / 10%),\n    0 0 0 1px rgb(10 10 10 / 2%);\n  padding: 16px;\n"]))),n(22)),f=n(0),x=["variant","color"],m={primary:{"--main":"grey","--accent":"white"},secondary:{"--main":"rgb(223, 181, 29)","--accent":"indigo"}};var g,v,C,_,w,y,P,k=h.a.button(c||(c=Object(p.a)(["\n  cursor: pointer;\n  font-size: 1rem;\n  border: 1px solid transparent;\n  border-radius: 6px;\n  padding: 8px 16px;\n  text-decoration: none;\n"]))),S=Object(h.a)(k)(o||(o=Object(p.a)(["\n  background-color: var(--main);\n  color: var(--accent);\n\n  &:hover {\n    opacity: 0.9;\n  }\n"]))),L=Object(h.a)(k)(i||(i=Object(p.a)(["\n  background-color: white;\n  color: var(--main);\n  border: 2px solid var(--main);\n\n  &:hover {\n    background: hsl(235deg 85% 97%);\n  }\n"]))),T=function(e){var t,n=e.variant,r=void 0===n?"fill":n,c=e.color,o=void 0===c?"primary":c,i=Object(O.a)(e,x);return"fill"===r?t=S:"outline"===r&&(t=L),Object(f.jsx)(t,Object(l.a)({style:m[o]},i))},q=h.a.div(g||(g=Object(p.a)(["\n  &:not(:last-child) {\n    margin-bottom: 12px;\n  }\n"]))),U=h.a.input(v||(v=Object(p.a)(["\n  border-radius: 6px;\n  border: 1px solid transparent;\n  border-color: #dbdbdb;\n  -webkit-appearance: none;\n  max-width: 100%;\n  width: 100%;\n  font-size: 1rem;\n  line-height: 1.5;\n  padding: 4px;\n  margin-left: 50px;\n  margin-right: 50px;\n"]))),B=h.a.label(C||(C=Object(p.a)(["\n  color: #363636;\n  display: block;\n  font-size: 1rem;\n  font-weight: 700;\n  margin-bottom: 8px;\n"]))),N=h.a.textarea(_||(_=Object(p.a)(["\n  border-radius: 6px;\n  border: 1px solid transparent;\n  border-color: #dbdbdb;\n  -webkit-appearance: none;\n  max-width: 100%;\n  width: 100%;\n  height: 4rem;\n  font-size: 1rem;\n  line-height: 1.5;\n  padding: 4px;\n  resize: vertical;\n  margin-left: 50px;\n  margin_right: 50px;\n  overflow: scroll;\n"])));var I=h.a.div(w||(w=Object(p.a)(["\n  color: red;\n  background-color: mistyrose;\n  border-radius: 6px;\n  display: flex;\n  padding: 8px;\n  align-items: center;\n  gap: 8px;\n  margin: 8px 0;\n"]))),E=h.a.span(y||(y=Object(p.a)(["\n  background-color: white;\n  height: 30px;\n  width: 30px;\n  border-radius: 50%;\n  font-weight: bold;\n  display: grid;\n  place-content: center;\n"]))),F=h.a.p(P||(P=Object(p.a)(["\n  margin: 0;\n"]))),D=function(e){var t=e.children;return Object(f.jsxs)(I,{children:[Object(f.jsx)(E,{children:"!"}),Object(f.jsx)(F,{children:t})]})};var A=function(e){var t=e.onLogin,n=Object(a.useState)(""),r=Object(d.a)(n,2),c=r[0],o=r[1],i=Object(a.useState)(""),s=Object(d.a)(i,2),j=s[0],l=s[1],u=Object(a.useState)([]),p=Object(d.a)(u,2),h=p[0],O=p[1],x=Object(a.useState)(!1),m=Object(d.a)(x,2),g=m[0],v=m[1],C=Object(b.f)();return Object(f.jsxs)("form",{onSubmit:function(e){e.preventDefault(),v(!0),fetch("/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:c,password:j})}).then((function(e){e.ok?(e.json().then((function(e){return t(e)})),C("/")):e.json().then((function(e){return O(e)}))}))},children:[Object(f.jsxs)(q,{children:[Object(f.jsx)(B,{htmlfor:"username",children:"Username"}),Object(f.jsx)(U,{type:"text",id:"username",autoComplete:"off",value:c,onChange:function(e){return o(e.target.value)},required:!0})]}),Object(f.jsxs)(q,{children:[Object(f.jsx)(B,{htmlfor:"password",children:"Password"}),Object(f.jsx)(U,{type:"password",id:"password",autoComplete:"current-password",value:j,onChange:function(e){return l(e.target.value)},required:!0})]}),Object(f.jsx)(q,{children:Object(f.jsx)(T,{type:"submit",children:g?"Loading...":"Login"})}),Object(f.jsx)(q,{children:h?h.map((function(e){return Object(f.jsx)(D,{children:e},e)})):null})]})};var z,J,M,H=function(e){var t=e.onLogin,n=Object(a.useState)(""),r=Object(d.a)(n,2),c=r[0],o=r[1],i=Object(a.useState)(""),s=Object(d.a)(i,2),j=s[0],l=s[1],u=Object(a.useState)(""),b=Object(d.a)(u,2),p=b[0],h=b[1],O=Object(a.useState)(""),x=Object(d.a)(O,2),m=x[0],g=x[1],v=Object(a.useState)(""),C=Object(d.a)(v,2),_=C[0],w=C[1],y=Object(a.useState)(!1),P=Object(d.a)(y,2),k=P[0],S=P[1],L=Object(a.useState)([]),I=Object(d.a)(L,2),E=I[0],F=I[1];return Object(f.jsxs)("form",{onSubmit:function(e){e.preventDefault(),F([]),S(!0),fetch("/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:c,password:j,password_confirmation:p,img_url:_,bio:m})}).then((function(e){S(!1),e.ok?e.json().then((function(e){return t(e)})):e.json().then((function(e){return F(e)}))}))},children:[Object(f.jsxs)(q,{children:[Object(f.jsx)(B,{htmlFor:"username",children:"Username"}),Object(f.jsx)(U,{type:"text",id:"username",autoComplete:"off",value:c,onChange:function(e){return o(e.target.value)}})]}),Object(f.jsxs)(q,{children:[Object(f.jsx)(B,{htmlFor:"password",children:"Password"}),Object(f.jsx)(U,{type:"password",id:"password",value:j,onChange:function(e){return l(e.target.value)},autoComplete:"current-password"})]}),Object(f.jsxs)(q,{children:[Object(f.jsx)(B,{htmlFor:"password",children:"Password Confirmation"}),Object(f.jsx)(U,{type:"password",id:"password_confirmation",value:p,onChange:function(e){return h(e.target.value)},autoComplete:"current-password"})]}),Object(f.jsxs)(q,{children:[Object(f.jsx)(B,{htmlFor:"imageUrl",children:"Profile Image"}),Object(f.jsx)(U,{type:"text",id:"imageUrl",value:_,onChange:function(e){return w(e.target.value)}})]}),Object(f.jsxs)(q,{children:[Object(f.jsx)(B,{htmlFor:"bio",children:"Bio"}),Object(f.jsx)(N,{rows:"3",id:"bio",value:m,onChange:function(e){return g(e.target.value)}})]}),Object(f.jsx)(q,{children:Object(f.jsx)(T,{type:"submit",children:k?"Loading...":"Sign Up"})}),Object(f.jsx)(q,{children:E?E.map((function(e){return Object(f.jsx)(D,{children:e},e)})):null})]})};var R,W,G,K=h.a.h1(z||(z=Object(p.a)(['\n  font-family: "Arial";\n  font-size: 3rem;\n  color: blue;\n  margin: 8px 0 16px;\n']))),Q=h.a.section(J||(J=Object(p.a)(["\n  max-width: 500px;\n  margin: 40px auto;\n  padding: 16px;\n"]))),V=h.a.hr(M||(M=Object(p.a)(["\n  border: none;\n  border-bottom: 1px solid #ccc;\n  margin: 16px 0;\n"]))),X=function(e){var t=e.onLogin,n=Object(a.useState)(!0),r=Object(d.a)(n,2),c=r[0],o=r[1];return Object(f.jsxs)(Q,{children:[Object(f.jsx)(K,{children:"Wood Shop"}),c?Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(A,{onLogin:t}),Object(f.jsx)(V,{}),Object(f.jsxs)("p",{children:["Don't have an account? \xa0",Object(f.jsx)(T,{color:"secondary",onClick:function(){return o(!1)},children:"Sign Up"})]})]}):Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(H,{onLogin:t}),Object(f.jsx)(V,{}),Object(f.jsxs)("p",{children:["Already have an account? \xa0",Object(f.jsx)(T,{color:"secondary",onClick:function(){return o(!0)},children:"Log In"})]})]})]})},Y=n(9);var Z=h.a.header(R||(R=Object(p.a)(["\n  display: flex;\n  justify-content: left;\n  align-items: center;\n  padding: 8px;\n"]))),$=h.a.h1(W||(W=Object(p.a)(['\n  font-family: "Arial";\n  font-size: 3rem;\n  color: rgb(223, 181, 29);\n  margin: 0;\n  line-height: 1;\n\n  a {\n    color: rgb(223, 181, 29);\n    text-decoration: none;\n  }\n']))),ee=h.a.nav(G||(G=Object(p.a)(["\n  display: flex;\n  gap: 4px;\n  position: absolute;\n  right: 8px;\n"]))),te=function(e){var t=e.onLogoutClick,n=e.setSearch;return Object(f.jsxs)(Z,{children:[Object(f.jsx)($,{children:Object(f.jsx)(Y.b,{to:"/",children:"The Cut List"})}),Object(f.jsxs)(ee,{children:[Object(f.jsx)(T,{as:Y.b,to:"/",children:"My Projects"}),Object(f.jsx)(T,{as:Y.b,to:"/projects",children:"Available Projects"}),Object(f.jsx)(T,{as:Y.b,to:"/new",children:"New Project"}),Object(f.jsx)(T,{variant:"outline",onClick:t,children:"Logout"})]}),Object(f.jsx)(q,{children:Object(f.jsx)(U,{type:"text",placeholder:"search",onChange:function(e){n(e.target.value)}})})]})},ne=n(13);var re=function(e){var t=e.onNewProjectSubmit,n=e.isLoading,r=e.errors,c=e.updateProject,o=e.onUpdateProjectSubmit,i=Object(a.useState)(c||{title:"",tools_required:"",description:"",materials:"",time:"",instructions:"",img_url:""}),s=Object(d.a)(i,2),j=s[0],u=s[1];function b(e){u(Object(l.a)(Object(l.a)({},j),{},Object(ne.a)({},e.target.name,e.target.value)))}return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("h3",{children:"Create a new project"}),Object(f.jsxs)("form",{onSubmit:c?function(e){e.preventDefault(),o(j)}:function(e){e.preventDefault(),t(j)},children:[Object(f.jsxs)(q,{children:[Object(f.jsx)(B,{htmlfor:"title",children:"Title"}),Object(f.jsx)(U,{type:"text",name:"title",autoComplete:"off",value:j.title,onChange:b,required:!0})]}),Object(f.jsxs)(q,{children:[Object(f.jsx)(B,{htmlfor:"tools_required",children:"Tools Required"}),Object(f.jsx)(U,{type:"text",name:"tools_required",autoComplete:"off",value:j.tools_required,onChange:b,required:!0})]}),Object(f.jsxs)(q,{children:[Object(f.jsx)(B,{htmlfor:"description",children:"Description"}),Object(f.jsx)(N,{type:"textarea",name:"description",autoComplete:"off",value:j.description,onChange:b,required:!0})]}),Object(f.jsxs)(q,{children:[Object(f.jsx)(B,{htmlfor:"materials",children:"Materials"}),Object(f.jsx)(U,{type:"text",name:"materials",autoComplete:"off",value:j.materials,onChange:b,required:!0})]}),Object(f.jsxs)(q,{children:[Object(f.jsx)(B,{htmlfor:"time",children:"Time to complete"}),Object(f.jsx)(U,{type:"number",name:"time",autoComplete:"off",value:j.time,onChange:b,required:!0})]}),Object(f.jsxs)(q,{children:[Object(f.jsx)(B,{htmlfor:"instructions",children:"Instructions"}),Object(f.jsx)(N,{type:"textarea",name:"instructions",autoComplete:"off",value:j.instructions,onChange:b,required:!0})]}),Object(f.jsxs)(q,{children:[Object(f.jsx)(B,{htmlfor:"img_url",children:"Add an image"}),Object(f.jsx)(U,{type:"text",name:"img_url",autoComplete:"off",value:j.img_url,onChange:b})]}),Object(f.jsx)(q,{children:Object(f.jsx)(T,{type:"submit",children:n?"Loading...":c?"Update Project":"Submit Project"})}),Object(f.jsx)(q,{children:r?r.map((function(e){return Object(f.jsx)(D,{children:e},e)})):null})]})]})};var ce=function(e){var t=e.project,n=e.onProjectButtonClick,r=e.onUpdateProjectClick,c=e.userId,o=e.all,i=e.onProjectCardClick,a=t.title,s=t.time,j=t.description,l=t.img_url,u=function(){return t.user_id===c?"user_authored_project":t.user_id!==c&&!0===o?"all_projects":"followed_project"};return Object(f.jsxs)("div",{className:"project_card",id:u(),onClick:function(e){i(t.id)},children:[Object(f.jsx)("img",{src:l,alt:a,className:"project_image"}),Object(f.jsx)("h3",{children:a}),Object(f.jsxs)("p",{children:["Time: ",s," hrs"]}),Object(f.jsx)("p",{className:"project_card_details",children:j}),Object(f.jsx)("p",{children:t.user?"By: ".concat(t.user.username):"User Authored Project"}),Object(f.jsx)("button",{value:u(),onClick:function(e){e.stopPropagation(),n(t.id,e)},children:"user_authored_project"===u()?"delete project":"followed_project"===u()?"remove project":"add project"}),"user_authored_project"===u()?Object(f.jsx)("button",{value:"update_project",onClick:function(e){e.stopPropagation(),r(t,e)},children:"update project"}):null,Object(f.jsx)("p",{children:t.follows?"follows: ".concat(t.follows.length):null})]})};var oe=function(e){var t=e.user,n=e.onProjectButtonClick,r=e.userId,c=e.onUpdateProjectClick,o=e.onProjectCardClick,i=e.allUserProjects;return Object(f.jsxs)("div",{children:[Object(f.jsxs)("h2",{children:[t.username,"'s Projects"]}),i.map((function(e){return Object(f.jsx)(ce,{project:e,onProjectButtonClick:n,userId:r,onUpdateProjectClick:c,onProjectCardClick:o},e.id)}))]})};var ie=function(e){var t=e.projects,n=e.onProjectButtonClick,r=e.userId,c=e.search,o=e.onProjectCardClick,i=t.filter((function(e){return e.user_id!==r})).filter((function(e){return e.follows<1||e.follows.find((function(e){return e.user_id!==r}))})).filter((function(e){return e.title.toLowerCase().includes(c.toLowerCase())}));return Object(f.jsxs)("div",{children:[Object(f.jsx)("h2",{children:"Available Projects:"}),i.map((function(e){return Object(f.jsx)(ce,{all:!0,project:e,onProjectButtonClick:n,userId:r,followed:!1,onProjectCardClick:o},e.id)}))]})};var ae=function(e){var t=e.userId,n=e.onProjectButtonClick,r=e.onUpdateProjectClick,c=(e.projects,Object(a.useState)({})),o=Object(d.a)(c,2),i=o[0],s=o[1],j=Object(a.useState)(""),l=Object(d.a)(j,2),u=l[0],p=l[1],h=Object(b.g)().id;Object(a.useEffect)((function(){fetch("/projects/".concat(h)).then((function(e){return e.json()})).then((function(e){s(e),e.user_id===t?p("user_authored_project"):e.follows.find((function(e){return e.user_id===t}))?p("followed_project"):p("all_projects")}))}),[]),console.log(i);var O=i.title,x=i.img_url,m=(i.follows,i.instructions),g=i.materials,v=i.time,C=i.tools_required,_=i.user,w=i.description;function y(e){n(i.id,e)}return Object(f.jsxs)("div",{className:"project_page",children:[Object(f.jsx)("img",{src:x,alt:O,className:"project_page_img"}),"all_projects"===u?Object(f.jsx)(T,{onClick:y,className:"project_page_button",children:"add project"}):null,Object(f.jsx)("h1",{children:O}),Object(f.jsx)("h3",{children:_?"By: ".concat(_.username):"By: Me"}),Object(f.jsxs)("h4",{children:["Time: ",v]}),Object(f.jsx)("p",{children:w}),Object(f.jsxs)("div",{children:[Object(f.jsx)("h4",{children:"Materials used: "}),Object(f.jsx)("ul",{children:Object(f.jsx)("li",{children:g})})]}),Object(f.jsxs)("div",{children:[Object(f.jsx)("h4",{children:"Tools used: "}),Object(f.jsx)("ul",{children:C})]}),Object(f.jsx)("p",{children:m}),Object(f.jsx)(T,{value:u,onClick:y,children:"user_authored_project"===u?"delete project":"followed_project"===u?"remove project":"add project"}),"user_authored_project"===u?Object(f.jsx)(T,{value:"update_project",onClick:function(e){r(i,e)},children:"update project"}):null]})};var se=function(){var e=Object(a.useState)(null),t=Object(d.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)([]),o=Object(d.a)(c,2),i=o[0],s=o[1],j=Object(a.useState)(!1),p=Object(d.a)(j,2),h=p[0],O=p[1],x=Object(a.useState)([]),m=Object(d.a)(x,2),g=m[0],v=m[1],C=Object(a.useState)(null),_=Object(d.a)(C,2),w=_[0],y=_[1],P=Object(a.useState)(""),k=Object(d.a)(P,2),S=k[0],L=k[1],T=Object(a.useState)([]),q=Object(d.a)(T,2),U=q[0],B=q[1],N=Object(b.f)();Object(a.useEffect)((function(){fetch("/me").then((function(e){e.ok&&e.json().then((function(e){console.log(e),I(),console.log("user projects:",e.projects),B([].concat(Object(u.a)(e.projects),Object(u.a)(e.followed_projects))),console.log([].concat(Object(u.a)(e.projects),Object(u.a)(e.followed_projects)))}))}))}),[n]);var I=function(){fetch("/projects").then((function(e){return e.json()})).then((function(e){v(e)}))};function E(e,t){if("user_authored_project"===t.target.value)fetch("/projects/".concat(e),{method:"DELETE"}).then((function(e){return e.json()})).then((function(e){var t=g.filter((function(t){return t.id!==e.id}));v(t);var n=U.filter((function(t){return t.id!==e.id}));B(n)}));else if("followed_project"===t.target.value){var r=U.find((function(t){return t.id===e})).follows.find((function(e){return e.user_id===n.id}));fetch("/follows/".concat(r.id),{method:"DELETE"}).then((function(e){return e.json()})).then((function(e){var t=U.filter((function(t){return t.id!==e.project_id}));B(t),I(),N("/")}))}else fetch("/follows",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({project_id:e,user_id:n.id,follow_type:"todo"})}).then((function(e){return e.json()})).then((function(e){var t=g.find((function(t){return t.id===e.project_id})),n=Object(l.a)(Object(l.a)({},t),{},{follows:[].concat(Object(u.a)(t.follows),[e])});B([].concat(Object(u.a)(U),[n])),I(),N("/")}))}function F(e){y(e),N("/new")}function D(e){N("/projects/".concat(e))}return console.log(n),console.log(U),n?Object(f.jsx)("div",{className:"App",children:Object(f.jsxs)("main",{children:[Object(f.jsx)(te,{onLogoutClick:function(){fetch("/logout",{method:"DELETE"}).then((function(e){e.ok&&(r(null),B([]))}))},setSearch:L}),Object(f.jsxs)(b.c,{children:[Object(f.jsx)(b.a,{path:"/new",element:Object(f.jsx)(re,{onNewProjectSubmit:function(e){s([]),O(!0),fetch("/projects",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:e.title,tools_required:e.tools_required,description:e.description,materials:e.materials,time:e.time,instructions:e.instructions,img_url:e.img_url})}).then((function(e){O(!1),e.ok?e.json().then((function(e){r(Object(l.a)(Object(l.a)({},n),{},{projects:[].concat(Object(u.a)(n.projects),[e])})),v([].concat(Object(u.a)(g),[e])),B([e].concat(Object(u.a)(U))),N("/")})):e.json().then((function(e){return s(e)}))}))},errors:i,isLoading:h,updateProject:w,onUpdateProjectSubmit:function(e){console.log(e.description),fetch("/projects/".concat(e.id),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:e.title,tools_required:e.tools_required,description:e.description,materials:e.materials,time:e.time,instructions:e.instructions,img_url:e.img_url})}).then((function(e){return e.json()})).then((function(e){var t=g.filter((function(t){return t.id!==e.id}));v([].concat(Object(u.a)(t),[w]));var c=n.projects.filter((function(e){return e.id!==w.id}));r(Object(l.a)(Object(l.a)({},n),{},{projects:[].concat(Object(u.a)(c),[e])})),N("/")}))}})}),Object(f.jsx)(b.a,{path:"/projects",element:Object(f.jsx)(ie,{projects:g,onProjectButtonClick:E,userId:n.id,search:S,onProjectCardClick:D})}),Object(f.jsx)(b.a,{path:"/",element:Object(f.jsx)(oe,{user:n,userId:n.id,projects:g,onProjectButtonClick:E,onUpdateProjectClick:F,search:S,onProjectCardClick:D,allUserProjects:U})}),Object(f.jsx)(b.a,{path:"/projects/:id",element:Object(f.jsx)(ae,{projects:g,userId:n.id,onProjectButtonClick:E,onUpdateProjectClick:F})})]})]})}):Object(f.jsx)(X,{onLogin:r})},je=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,34)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,o=t.getLCP,i=t.getTTFB;n(e),r(e),c(e),o(e),i(e)}))};j.a.render(Object(f.jsx)(Y.a,{children:Object(f.jsx)(se,{})}),document.getElementById("root")),je()}},[[33,1,2]]]);
//# sourceMappingURL=main.2b39dd06.chunk.js.map